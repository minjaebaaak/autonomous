# AEGIS Protocol v3.6

> **A**utonomous **E**nhanced **G**uard & **I**nspection **S**ystem
>
> Claude Codeì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” 8-Layer ê²€ì¦ í”„ë ˆì„ì›Œí¬

---

## ê°œìš”

AEGISëŠ” Claude Codeë¥¼ í™œìš©í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì‹œ í’ˆì§ˆì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ì²´ê³„ì ì¸ ê²€ì¦ í”„ë¡œí† ì½œì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AEGIS v3.6 Unified                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš¡ COGNITIVE LAYER (ì‚¬ê³  ë„êµ¬)                                  â”‚
â”‚     â”œâ”€ ultrathink: ëª¨ë“  ì‘ì—…ì— ê¸°ë³¸ ì ìš©                         â”‚
â”‚     â””â”€ Sequential Thinking MCP: ë³µì¡í•œ ë¬¸ì œ ì‹œ í•„ìˆ˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ TASK LAYER (ì‘ì—… ì¶”ì )                                       â”‚
â”‚     â””â”€ TodoWrite: ëª¨ë“  ì‘ì—… í˜„í™© ì¶”ì                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”” HOOK LAYER (ì•Œë¦¼ ìë™í™”) - v3.6 ì‹ ê·œ                         â”‚
â”‚     â”œâ”€ PermissionRequest: ê¶Œí•œ ìš”ì²­ ì‹œ ì¦‰ì‹œ ì•Œë¦¼                 â”‚
â”‚     â”œâ”€ Stop: ì‘ë‹µ ì™„ë£Œ ì‹œ ì‚¬ìš©ì ì…ë ¥ ì•Œë¦¼                       â”‚
â”‚     â””â”€ PostToolUse: Write/Edit í›„ ìë™ í¬ë§·íŒ…                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”„ CI/CD LAYER (ìë™í™”)                                         â”‚
â”‚     â”œâ”€ GitHub Actions: Push ì‹œ ìë™ ê²€ì¦                        â”‚
â”‚     â””â”€ Slack ì•Œë¦¼: ì„±ê³µ/ì‹¤íŒ¨ ìë™ ì „ì†¡                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” VALIDATION LAYERS (8-Layer ê²€ì¦)                            â”‚
â”‚     â”œâ”€ Layer 0: Schema Validation                               â”‚
â”‚     â”œâ”€ Layer 1: Static Analysis (Build)                         â”‚
â”‚     â”œâ”€ Layer 2: Unit Test                                       â”‚
â”‚     â”œâ”€ Layer 3: Integration Test (API)                          â”‚
â”‚     â”œâ”€ Layer 4: E2E Test (Playwright MCP + Chrome)              â”‚
â”‚     â”œâ”€ Layer 5: Production E2E                                  â”‚
â”‚     â”œâ”€ Layer 6: Production Monitoring                           â”‚
â”‚     â””â”€ Layer 7: Hook-based Notification                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” AUTOMATION LAYER                                             â”‚
â”‚     â”œâ”€ Feedback Loop: ìë™ ê²€ì¦ + ìˆ˜ì • (ìµœëŒ€ 3íšŒ)               â”‚
â”‚     â””â”€ Infinite Loop: ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ë°˜ë³µ (Ralph Wiggum)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. 8-Layer ê²€ì¦ ì‹œìŠ¤í…œ
| Layer | ì´ë¦„ | ê²€ì¦ ëŒ€ìƒ | ë„êµ¬/ëª…ë ¹ì–´ |
|-------|------|----------|------------|
| 0 | Schema Validation | DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ | `--schema <table>` |
| 1 | Static Analysis | ë¹Œë“œ, íƒ€ì… ì²´í¬ | `pnpm build` |
| 2 | Unit Test | ê°œë³„ í•¨ìˆ˜/ëª¨ë“ˆ | `pnpm test` |
| 3 | Integration Test | API ì—”ë“œí¬ì¸íŠ¸ | `--api` |
| 4 | E2E Test | ì „ì²´ ì‚¬ìš©ì íë¦„ | Playwright MCP |
| 5 | Production E2E | í”„ë¡œë•ì…˜ ê²€ì¦ | Chrome MCP |
| 6 | Production Monitor | ì—ëŸ¬ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ | `--monitor` |
| 7 | Hook Notification | ì•Œë¦¼ ìë™í™” | PermissionRequest/Stop |

### 2. ìë™í™” ëª…ë ¹ì–´
| ëª…ë ¹ | ê¸°ëŠ¥ |
|------|------|
| `/commit` | ë³€ê²½ì‚¬í•­ ë¶„ì„ + ìŠ¤ë§ˆíŠ¸ ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„± |
| `/feedback-loop` | ìë™ ê²€ì¦ + ìˆ˜ì • (ìµœëŒ€ 3íšŒ ë°˜ë³µ) |
| `/infinite-loop` | ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ë¬´í•œ ë°˜ë³µ (Ralph Wiggum ëª¨ë“œ) |
| `/verify` | ì „ì²´ Layer ê²€ì¦ |

### 3. ì»¤ìŠ¤í…€ ìŠ¤í‚¬
| ìŠ¤í‚¬ | ê¸°ëŠ¥ |
|------|------|
| `verify-app` | E2E ê²€ì¦ (ë¡œê·¸ì¸, í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸) |
| `code-simplifier` | ì½”ë“œ ì •ë¦¬ + ìµœì í™” |

### 4. Hook ê¸°ë°˜ ì•Œë¦¼
```json
{
  "hooks": {
    "PermissionRequest": [{"matcher": "*", "command": "notify-user.sh"}],
    "Stop": [{"command": "notify-user.sh 'ì‚¬ìš©ì ì…ë ¥ í•„ìš”'"}],
    "PostToolUse": [{"matcher": "Write|Edit", "command": "post-tool-format.sh"}]
  }
}
```

---

## ë¹ ë¥¸ ì‹œì‘

### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone git@github.com:minjaebaak/aegis-protocol.git
cd aegis-protocol
```

### 2. í”„ë¡œì íŠ¸ì— ì„¤ì¹˜
```bash
./scripts/install.sh /path/to/your/project
```

### 3. ì„¤ì • íŒŒì¼ ìˆ˜ì •
`aegis.config.js`ë¥¼ í”„ë¡œì íŠ¸ì— ë§ê²Œ ìˆ˜ì •:
```javascript
module.exports = {
  project: {
    name: 'your-project-name',
    type: 'monorepo',  // or 'single'
    packageManager: 'pnpm',
  },
  server: {
    ip: 'your.server.ip',
    user: 'your-user',
    path: '/path/to/project',
  },
  validation: {
    buildCommand: 'pnpm build',
    testCommand: 'pnpm test',
    lintCommand: 'pnpm lint',
  },
};
```

### 4. CLAUDE.md ì»¤ìŠ¤í„°ë§ˆì´ì§•
```bash
# í…œí”Œë¦¿ì—ì„œ CLAUDE.md ìƒì„±
cp CLAUDE.md.template CLAUDE.md
# í¸ì§‘ê¸°ë¡œ ì—´ì–´ì„œ í”Œë ˆì´ìŠ¤í™€ë” ìˆ˜ì •
```

---

## íŒŒì¼ êµ¬ì¡°

```
aegis-protocol/
â”œâ”€â”€ README.md                       # ì´ íŒŒì¼
â”œâ”€â”€ CLAUDE.md.template              # í”„ë¡œì íŠ¸ìš© CLAUDE.md í…œí”Œë¦¿
â”œâ”€â”€ aegis.config.example.js         # ì„¤ì • íŒŒì¼ ì˜ˆì‹œ
â”œâ”€â”€ LICENSE                         # MIT License
â”‚
â”œâ”€â”€ .0/
â”‚   â””â”€â”€ AEGIS_PROTOCOL.md          # 8-Layer ê²€ì¦ í”„ë¡œí† ì½œ ìƒì„¸
â”‚
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ notify-user.sh         # macOS/Linux ì•Œë¦¼ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”‚   â””â”€â”€ post-tool-format.sh    # ìë™ í¬ë§·íŒ… ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ commit.md              # ìŠ¤ë§ˆíŠ¸ ì»¤ë°‹
â”‚   â”‚   â”œâ”€â”€ feedback-loop.md       # í”¼ë“œë°± ë£¨í”„
â”‚   â”‚   â”œâ”€â”€ infinite-loop.md       # Ralph Wiggum ëª¨ë“œ
â”‚   â”‚   â””â”€â”€ verify.md              # ì „ì²´ ê²€ì¦
â”‚   â””â”€â”€ skills/
â”‚       â”œâ”€â”€ verify-app/            # E2E ê²€ì¦ ìŠ¤í‚¬
â”‚       â””â”€â”€ code-simplifier/       # ì½”ë“œ ì •ë¦¬ ìŠ¤í‚¬
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ aegis.config.js.template   # ì„¤ì • íŒŒì¼ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ install.sh                 # ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ aegis-validate.sh          # ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ deploy.sh.template         # ë°°í¬ í…œí”Œë¦¿
â”‚   â””â”€â”€ rollback.sh                # ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ INSTALLATION.md            # ì„¤ì¹˜ ê°€ì´ë“œ
    â”œâ”€â”€ CONFIGURATION.md           # ì„¤ì • ê°€ì´ë“œ
    â””â”€â”€ COMMANDS.md                # ëª…ë ¹ì–´ ë ˆí¼ëŸ°ìŠ¤
```

---

## ì‚¬ìš© ì˜ˆì‹œ

### AEGIS ê²€ì¦ ì‹¤í–‰
```bash
# ì „ì²´ ê²€ì¦
./scripts/aegis-validate.sh --all

# ë¹Œë“œë§Œ ê²€ì¦
./scripts/aegis-validate.sh --build

# API í…ŒìŠ¤íŠ¸
./scripts/aegis-validate.sh --api

# ìŠ¤í‚¤ë§ˆ ê²€ì¦
./scripts/aegis-validate.sh --schema users email
```

### ìë™ í”¼ë“œë°± ë£¨í”„
```bash
# Claude Codeì—ì„œ /feedback-loop ëª…ë ¹ ì‹¤í–‰
# ìë™ìœ¼ë¡œ ë¹Œë“œ â†’ í…ŒìŠ¤íŠ¸ â†’ ë¦°íŠ¸ ê²€ì¦
# ì‹¤íŒ¨ ì‹œ ìë™ ìˆ˜ì • (ìµœëŒ€ 3íšŒ)
```

### Ralph Wiggum ëª¨ë“œ (ë¬´í•œ ì´í„°ë ˆì´ì…˜)
```bash
# Claude Codeì—ì„œ /infinite-loop ëª…ë ¹ ì‹¤í–‰
# ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ìë™ ë°˜ë³µ (ìµœëŒ€ 10íšŒ)
```

---

## ë³‘ë ¬ ì‹¤í–‰ ì§€ì›

5ê°œì˜ Claude ì„¸ì…˜ì„ ë™ì‹œì— ìš´ì˜ ê°€ëŠ¥:

| Claude | ë‹´ë‹¹ ì˜ì—­ | ë””ë ‰í† ë¦¬ |
|--------|----------|---------|
| 1 | API ê°œë°œ | `server/src/routes/`, `server/src/services/` |
| 2 | í”„ë¡ íŠ¸ì—”ë“œ | `app/src/components/`, `app/src/pages/` |
| 3 | ìƒíƒœ ê´€ë¦¬ | `app/src/stores/`, `app/src/hooks/` |
| 4 | í…ŒìŠ¤íŠ¸/ë¬¸ì„œ | `__tests__/`, `.0/` |
| 5 | ë²„ê·¸ ìˆ˜ì • | íŠ¹ì • ì´ìŠˆ ì§‘ì¤‘ |

**ì¶©ëŒ ë°©ì§€ ê·œì¹™:**
- ë¹Œë“œëŠ” 1ê°œ Claudeë§Œ ë‹´ë‹¹
- Git ì»¤ë°‹ì€ ìˆœì°¨ ì‹¤í–‰
- ê°™ì€ íŒŒì¼ ë™ì‹œ ìˆ˜ì • ê¸ˆì§€

---

## Claude Code í†µí•©

| Claude ê¸°ëŠ¥ | AEGIS í™œìš© |
|------------|-----------|
| ultrathink | ëª¨ë“  ì‘ì—…ì— ê¸°ë³¸ ì ìš© |
| Sequential Thinking MCP | ë³µì¡í•œ ë¬¸ì œ ë¶„ì„ |
| TodoWrite | Layerë³„ ì‘ì—… ì¶”ì  |
| Playwright MCP | Layer 4 E2E í…ŒìŠ¤íŠ¸ |
| Chrome MCP | Layer 5 í”„ë¡œë•ì…˜ ê²€ì¦ |

---

## ë²„ì „ íˆìŠ¤í† ë¦¬

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| v1.0 | - | ê¸°ë³¸ 5ë‹¨ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸ |
| v2.0 | - | Cognitive Layer ì¶”ê°€ |
| v3.0 | 2026-01-04 | 7-Layer ì‹œìŠ¤í…œìœ¼ë¡œ ê°œí¸ |
| v3.1 | 2026-01-04 | npm â†’ pnpm ì „í™˜ |
| v3.5 | 2026-01-05 | Unified - Automation Layer, ë³‘ë ¬ ì‹¤í–‰ ì§€ì› |
| v3.6 | 2026-01-07 | **Hook Layer** - ì•Œë¦¼ ìë™í™” (PermissionRequest/Stop) |

---

## ë¼ì´ì„ ìŠ¤

MIT License - ììœ ë¡­ê²Œ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬ ê°€ëŠ¥

---

**Created by**: Claude AI & minjaebaak
**Version**: 3.6 Unified
**Last Updated**: 2026-01-07
